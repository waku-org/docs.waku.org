"use strict";(self.webpackChunkwaku_guide=self.webpackChunkwaku_guide||[]).push([[4704],{39018:(e,n,t)=>{var r=t(98941);t.o(r,"AccordionItem")&&t.d(n,{AccordionItem:function(){return r.AccordionItem}})},92264:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"guides/nwaku/upgrade-instructions","title":"Upgrade Instructions","description":"If you are currently using Nwaku, running an old version and want to upgrade your node, please follow the below migration instructions for each target release newer than your current running version in ascending order.","source":"@site/docs/guides/nwaku/upgrade-instructions.md","sourceDirName":"guides/nwaku","slug":"/guides/nwaku/upgrade-instructions","permalink":"/guides/nwaku/upgrade-instructions","draft":false,"unlisted":false,"editUrl":"https://github.com/waku-org/docs.waku.org/tree/develop/docs/guides/nwaku/upgrade-instructions.md","tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"title":"Upgrade Instructions","hide_table_of_contents":true,"sidebar_label":"Upgrade Instructions"},"sidebar":"guides","previous":{"title":"Frequently Asked Questions","permalink":"/guides/nwaku/faq"},"next":{"title":"JavaScript Waku SDK","permalink":"/guides/js-waku/"}}');var i=t(74848),s=t(28453),o=t(39018);const a={title:"Upgrade Instructions",hide_table_of_contents:!0,sidebar_label:"Upgrade Instructions"},d=void 0,c={},u=[{value:"Target Releases",id:"target-releases",level:2}];function l(e){const n={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"If you are currently using Nwaku, running an old version and want to upgrade your node, please follow the below migration instructions for each target release newer than your current running version in ascending order."}),"\n",(0,i.jsx)(n.p,{children:"For example, if you are interested in the version v0.32.0 and are currently running v0.30.0, follow the instructions for v0.31.0 and then the ones for v0.32.0"}),"\n",(0,i.jsx)(n.h2,{id:"target-releases",children:"Target Releases"}),"\n",(0,i.jsxs)(o.AccordionItem,{title:"v0.32.0",children:[(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"--protected-topic"})," CLI config was deprecated and is replaced by the new ",(0,i.jsx)(n.code,{children:"--protected-shard"})," configuration. Instead of configuring ",(0,i.jsx)(n.code,{children:"topic:public_key"})," you will now need to configure ",(0,i.jsx)(n.code,{children:"shard:public_key"}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{})]}),(0,i.jsxs)(n.p,{children:["For example, if you used to run your node with ",(0,i.jsx)(n.code,{children:'--protected-topic="waku/2/rs/3/4:your_public_key"'})," you will need to replace this configuration for ",(0,i.jsx)(n.code,{children:'--protected-shard="4:your_public_key"'})]})]}),"\n",(0,i.jsxs)(o.AccordionItem,{title:"v0.31.0",children:[(0,i.jsxs)(n.p,{children:["Named sharding was deprecated in this version. This means that pubsub topics will only be supported if they comply with the static sharding format: ",(0,i.jsx)("code",{children:"/waku/2/rs/<CLUSTER_ID>/<SHARD_ID>"}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{})]}),(0,i.jsx)(n.p,{children:"In order to migrate your existing application, you need to:"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Make sure that your clients are sending messages to pubsub topics in the required format. Check that in your interactions with Nwaku's REST API or when using ",(0,i.jsx)(n.code,{children:"js-waku"}),", the configured pubsub topics follow the static sharding format defined above."]}),"\n",(0,i.jsxs)(n.li,{children:["When running a node with the ",(0,i.jsx)(n.code,{children:"--pubsub-topic"})," CLI flag, the values provided should comply with the static sharding format."]}),"\n",(0,i.jsx)(n.li,{children:"If your application relies on nodes or clients that may not be updated immediately, keep your node on an older version while subscribing to both the current pubsub topic and the new pubsub topic that will comply with the static sharding format. In that case, you can keep backward compatibility for a migration period."}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);